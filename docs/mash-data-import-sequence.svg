<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="536px" preserveAspectRatio="none" style="width:1743px;height:536px;background:#FFFFFF;" version="1.1" viewBox="0 0 1743 536" width="1743px" zoomAndPan="magnify"><defs><filter height="300%" id="feehiea9le1z4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="326" x="710.75" y="28.708">MASH data import - Proof of concept</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="58" x2="58" y1="102.25" y2="467.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="188" x2="188" y1="102.25" y2="467.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="460" x2="460" y1="102.25" y2="467.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="776" x2="776" y1="102.25" y2="467.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="954.5" x2="954.5" y1="102.25" y2="467.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1145" x2="1145" y1="102.25" y2="467.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1488.5" x2="1488.5" y1="102.25" y2="467.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1579.5" x2="1579.5" y1="102.25" y2="467.8438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1717.5" x2="1717.5" y1="102.25" y2="467.8438"/><rect fill="#FEFECE" filter="url(#feehiea9le1z4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="103" x="5" y="66.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="12" y="86.9482">Google Form</text><rect fill="#FEFECE" filter="url(#feehiea9le1z4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="103" x="5" y="466.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="12" y="486.8389">Google Form</text><rect fill="#FEFECE" filter="url(#feehiea9le1z4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="109" x="132" y="66.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="139" y="86.9482">Google Sheet</text><rect fill="#FEFECE" filter="url(#feehiea9le1z4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="109" x="132" y="466.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="139" y="486.8389">Google Sheet</text><rect fill="#FEFECE" filter="url(#feehiea9le1z4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="107" x="405" y="66.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="412" y="86.9482">Google Script</text><rect fill="#FEFECE" filter="url(#feehiea9le1z4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="107" x="405" y="466.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="412" y="486.8389">Google Script</text><rect fill="#FEFECE" filter="url(#feehiea9le1z4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="67" x="741" y="66.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="748" y="86.9482">AWS S3</text><rect fill="#FEFECE" filter="url(#feehiea9le1z4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="67" x="741" y="466.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="748" y="486.8389">AWS S3</text><path d="M917.5,75.9531 L991.5,75.9531 C996.5,75.9531 996.5,89.1016 996.5,89.1016 C996.5,89.1016 996.5,102.25 991.5,102.25 L917.5,102.25 C912.5,102.25 912.5,89.1016 912.5,89.1016 C912.5,89.1016 912.5,75.9531 917.5,75.9531 " fill="#FEFECE" filter="url(#feehiea9le1z4)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M991.5,75.9531 C986.5,75.9531 986.5,89.1016 986.5,89.1016 C986.5,102.25 991.5,102.25 991.5,102.25 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="917.5" y="93.9482">AWS SQS</text><path d="M917.5,466.8438 L991.5,466.8438 C996.5,466.8438 996.5,479.9922 996.5,479.9922 C996.5,479.9922 996.5,493.1406 991.5,493.1406 L917.5,493.1406 C912.5,493.1406 912.5,479.9922 912.5,479.9922 C912.5,479.9922 912.5,466.8438 917.5,466.8438 " fill="#FEFECE" filter="url(#feehiea9le1z4)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M991.5,466.8438 C986.5,466.8438 986.5,479.9922 986.5,479.9922 C986.5,493.1406 991.5,493.1406 991.5,493.1406 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="917.5" y="484.8389">AWS SQS</text><rect fill="#FEFECE" filter="url(#feehiea9le1z4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="103" x="1092" y="66.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1099" y="86.9482">AWS Lambda</text><rect fill="#FEFECE" filter="url(#feehiea9le1z4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="103" x="1092" y="466.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1099" y="486.8389">AWS Lambda</text><rect fill="#FEFECE" filter="url(#feehiea9le1z4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="96" x="1438.5" y="66.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="1445.5" y="86.9482">Google Doc</text><rect fill="#FEFECE" filter="url(#feehiea9le1z4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="96" x="1438.5" y="466.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="1445.5" y="486.8389">Google Doc</text><rect fill="#FEFECE" filter="url(#feehiea9le1z4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="1548.5" y="66.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="1555.5" y="86.9482">SC API</text><rect fill="#FEFECE" filter="url(#feehiea9le1z4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="1548.5" y="466.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="1555.5" y="486.8389">SC API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="1692.5" y="98.9482">SC DB</text><path d="M1699.5,49.9531 C1699.5,39.9531 1717.5,39.9531 1717.5,39.9531 C1717.5,39.9531 1735.5,39.9531 1735.5,49.9531 L1735.5,75.9531 C1735.5,85.9531 1717.5,85.9531 1717.5,85.9531 C1717.5,85.9531 1699.5,85.9531 1699.5,75.9531 L1699.5,49.9531 " fill="#FEFECE" filter="url(#feehiea9le1z4)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1699.5,49.9531 C1699.5,59.9531 1717.5,59.9531 1717.5,59.9531 C1717.5,59.9531 1735.5,59.9531 1735.5,49.9531 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="1692.5" y="479.8389">SC DB</text><path d="M1699.5,493.1406 C1699.5,483.1406 1717.5,483.1406 1717.5,483.1406 C1717.5,483.1406 1735.5,483.1406 1735.5,493.1406 L1735.5,519.1406 C1735.5,529.1406 1717.5,529.1406 1717.5,529.1406 C1717.5,529.1406 1699.5,529.1406 1699.5,519.1406 L1699.5,493.1406 " fill="#FEFECE" filter="url(#feehiea9le1z4)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1699.5,493.1406 C1699.5,503.1406 1717.5,503.1406 1717.5,503.1406 C1717.5,503.1406 1735.5,503.1406 1735.5,493.1406 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><path d="M6,117.25 L6,142.25 L241,142.25 L241,127.25 L231,117.25 L6,117.25 " fill="#FBFB77" filter="url(#feehiea9le1z4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M231,117.25 L231,127.25 L241,127.25 L231,117.25 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="55.5" y="134.3169">Google automation</text><polygon fill="#A80036" points="176.5,168.5156,186.5,172.5156,176.5,176.5156,180.5,172.5156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="58.5" x2="182.5" y1="172.5156" y2="172.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="65.5" y="167.4497">form submission</text><polygon fill="#A80036" points="448.5,197.6484,458.5,201.6484,448.5,205.6484,452.5,201.6484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188.5" x2="454.5" y1="201.6484" y2="201.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="195.5" y="196.5825">triggers on form submit</text><polygon fill="#A80036" points="199.5,226.7813,189.5,230.7813,199.5,234.7813,195.5,230.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="193.5" x2="459.5" y1="230.7813" y2="230.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="205.5" y="225.7153">update sheet with generated unique ID</text><polygon fill="#A80036" points="764.5,255.9141,774.5,259.9141,764.5,263.9141,768.5,259.9141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="460.5" x2="770.5" y1="259.9141" y2="259.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="292" x="467.5" y="254.8481">send form data and unique ID (and sheet ID?)</text><polygon fill="#A80036" points="942.5,285.0469,952.5,289.0469,942.5,293.0469,946.5,289.0469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="776.5" x2="948.5" y1="289.0469" y2="289.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="783.5" y="283.981">message is sent to SQS</text><polygon fill="#A80036" points="1133.5,314.1797,1143.5,318.1797,1133.5,322.1797,1137.5,318.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="954.5" x2="1139.5" y1="318.1797" y2="318.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="961.5" y="313.1138">send message to Lambda</text><polygon fill="#A80036" points="1476.5,358.4453,1486.5,362.4453,1476.5,366.4453,1480.5,362.4453" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1145.5" x2="1482.5" y1="362.4453" y2="362.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="319" x="1152.5" y="342.2466">generate Google Doc using form data in message</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="1156.5" y="357.3794"/><polygon fill="#A80036" points="199.5,387.5781,189.5,391.5781,199.5,395.5781,195.5,391.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="193.5" x2="1144.5" y1="391.5781" y2="391.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249" x="205.5" y="386.5122">update sheet with Google Doc edit URL</text><polygon fill="#A80036" points="1567.5,416.7109,1577.5,420.7109,1567.5,424.7109,1571.5,420.7109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1145.5" x2="1573.5" y1="420.7109" y2="420.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="301" x="1152.5" y="415.645">send form data, unique ID and Google Doc URL</text><polygon fill="#A80036" points="1705.5,445.8438,1715.5,449.8438,1705.5,453.8438,1709.5,449.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1579.5" x2="1711.5" y1="449.8438" y2="449.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="1586.5" y="444.7778">save data into DB</text><!--MD5=[6c9cb8385471e7e6104b35acdb0363a0]
@startuml

title MASH data import - Proof of concept

participant "Google Form" as gform
participant "Google Sheet" as gsheet
participant "Google Script" as gscript
participant "AWS S3" as s3
queue       "AWS SQS" as sqs
participant "AWS Lambda" as lambda
participant "Google Doc" as gdoc
participant "SC API" as scapi
database    "SC DB" as scdb

note over gform,gsheet:Google automation

gform   -> gsheet:form submission
gsheet  -> gscript:triggers on form submit
gsheet  <- gscript:update sheet with generated unique ID
gscript -> s3:send form data and unique ID (and sheet ID?)
s3      -> sqs:message is sent to SQS
sqs     -> lambda:send message to Lambda
lambda  -> gdoc:generate Google Doc using form data in message\n
lambda  -> gsheet:update sheet with Google Doc edit URL
lambda  -> scapi:send form data, unique ID and Google Doc URL
scapi   -> scdb:save data into DB

@enduml

PlantUML version 1.2021.7(Sun May 23 13:40:07 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>